name: DÃ©ploiement GitHub Pages

on:
  push:
    branches: [ main ]
  workflow_dispatch:

# Permissions nÃ©cessaires pour dÃ©ployer sur GitHub Pages
permissions:
  contents: read
  pages: write
  id-token: write

# Permet un seul dÃ©ploiement Ã  la fois
concurrency:
  group: "pages"
  cancel-in-progress: false

jobs:
  # Job de build
  build:
    name: ğŸ—ï¸ Build du site
    runs-on: ubuntu-latest

    steps:
    - name: ğŸ“¥ RÃ©cupÃ©ration du code
      uses: actions/checkout@v4

    - name: ğŸ“‹ Configuration de GitHub Pages
      uses: actions/configure-pages@v4

    - name: ğŸ“¦ Upload des artefacts
      uses: actions/upload-pages-artifact@v3
      with:
        path: '.'

  # Job de dÃ©ploiement
  deploy:
    name: ğŸš€ DÃ©ploiement
    environment:
      name: github-pages
      url: ${{ steps.deployment.outputs.page_url }}
    runs-on: ubuntu-latest
    needs: build

    steps:
    - name: ğŸŒ DÃ©ploiement sur GitHub Pages
      id: deployment
      uses: actions/deploy-pages@v4

    - name: âœ… DÃ©ploiement rÃ©ussi
      run: |
        echo "â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
        echo "âœ… DÃ©ploiement rÃ©ussi !"
        echo "â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
        echo ""
        echo "ğŸŒ URL: ${{ steps.deployment.outputs.page_url }}"
        echo ""
        echo "Votre application est maintenant accessible en ligne ! ğŸ‰"
